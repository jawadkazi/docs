---
title: "Debugging"
description: "Debugging tools: watch mode, raw model streams, and tracing reasoning leakage"
icon: "bug"
---

This page covers debugging helpers for streaming output, especially when a provider mixes reasoning into normal text.

## Runtime debug overrides

Use `/debug` in chat to set **runtime-only** config overrides (memory, not disk).

<Warning>
`/debug` is disabled by default; enable with `commands.debug: true`.
</Warning>

This is handy when you need to toggle obscure settings without editing `moltbot.json`.

```bash
/debug show
/debug set messages.responsePrefix="[moltbot]"
/debug unset messages.responsePrefix
/debug reset
```

`/debug reset` clears all overrides and returns to the on-disk config.

## Gateway watch mode

For fast iteration, run the gateway under the file watcher:

```bash
pnpm gateway:watch --force
```

This maps to:

```bash
tsx watch src/entry.ts gateway --force
```

Add any gateway CLI flags after `gateway:watch` and they will be passed through on each restart.

## Dev profile + dev gateway

Use the dev profile to isolate state and spin up a safe, disposable setup for debugging. There are **two** `--dev` flags:

<Tabs>
  <Tab title="Global --dev (profile)">
    Isolates state under `~/.clawdbot-dev` and defaults the gateway port to `19001` (derived ports shift with it).
  </Tab>
  <Tab title="gateway --dev">
    Tells the Gateway to auto-create a default config + workspace when missing (and skip BOOTSTRAP.md).
  </Tab>
</Tabs>

### Recommended flow

```bash
pnpm gateway:dev
CLAWDBOT_PROFILE=dev moltbot tui
```

<Tip>
If you don't have a global install yet, run the CLI via `pnpm moltbot ...`.
</Tip>

### What this does

<AccordionGroup>
  <Accordion title="Profile isolation (global --dev)">
    - `CLAWDBOT_PROFILE=dev`
    - `CLAWDBOT_STATE_DIR=~/.clawdbot-dev`
    - `CLAWDBOT_CONFIG_PATH=~/.clawdbot-dev/moltbot.json`
    - `CLAWDBOT_GATEWAY_PORT=19001` (browser/canvas shift accordingly)
  </Accordion>
  <Accordion title="Dev bootstrap (gateway --dev)">
    - Writes a minimal config if missing (`gateway.mode=local`, bind loopback)
    - Sets `agent.workspace` to the dev workspace
    - Sets `agent.skipBootstrap=true` (no BOOTSTRAP.md)
    - Seeds the workspace files if missing: `AGENTS.md`, `SOUL.md`, `TOOLS.md`, `IDENTITY.md`, `USER.md`, `HEARTBEAT.md`
    - Default identity: **C3‑PO** (protocol droid)
    - Skips channel providers in dev mode (`CLAWDBOT_SKIP_CHANNELS=1`)
  </Accordion>
</AccordionGroup>

### Reset flow (fresh start)

```bash
pnpm gateway:dev:reset
```

<Note>
`--dev` is a **global** profile flag and gets eaten by some runners. If you need to spell it out, use the env var form:

```bash
CLAWDBOT_PROFILE=dev moltbot gateway --dev --reset
```
</Note>

`--reset` wipes config, credentials, sessions, and the dev workspace (using `trash`, not `rm`), then recreates the default dev setup.

<Tip>
If a non‑dev gateway is already running (launchd/systemd), stop it first:

```bash
moltbot gateway stop
```
</Tip>

## Raw stream logging (Moltbot)

Moltbot can log the **raw assistant stream** before any filtering/formatting. This is the best way to see whether reasoning is arriving as plain text deltas (or as separate thinking blocks).

Enable it via CLI:

```bash
pnpm gateway:watch --force --raw-stream
```

Optional path override:

```bash
pnpm gateway:watch --force --raw-stream --raw-stream-path ~/.clawdbot/logs/raw-stream.jsonl
```

Equivalent env vars:

```bash
CLAWDBOT_RAW_STREAM=1
CLAWDBOT_RAW_STREAM_PATH=~/.clawdbot/logs/raw-stream.jsonl
```

**Default file:** `~/.clawdbot/logs/raw-stream.jsonl`

## Raw chunk logging (pi-mono)

To capture **raw OpenAI-compat chunks** before they are parsed into blocks, pi-mono exposes a separate logger:

```bash
PI_RAW_STREAM=1
```

Optional path:

```bash
PI_RAW_STREAM_PATH=~/.pi-mono/logs/raw-openai-completions.jsonl
```

**Default file:** `~/.pi-mono/logs/raw-openai-completions.jsonl`

<Info>
This is only emitted by processes using pi-mono's `openai-completions` provider.
</Info>

## Safety notes

<Warning>
- Raw stream logs can include full prompts, tool output, and user data.
- Keep logs local and delete them after debugging.
- If you share logs, scrub secrets and PII first.
</Warning>